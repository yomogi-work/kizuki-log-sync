# Step 0: 概念化レベル手動分析 - 実行手順書

## 概要

AIによる概念化レベル自動判定の前段階として、人間（小川先生）が手動で判定を行い、正解データ（ゴールドスタンダード）を作成する。

## 前提条件

- Python 3.x がインストール済み
- `kizuki_log.db` に全週報データが投入済み（211件のjournals）
- ローカルサーバー (`start_server.py`) が起動可能

## 実行手順

### 1. データ抽出（済）

```bash
python step0_extract_data.py
```

- `step0_data.json` に 20件のエントリーが出力される
- 層化サンプリング（学生 × 前半/後半）で均等に抽出

### 2. 判定作業

1. サーバーを起動

   ```bash
   python start_server.py
   ```

2. ブラウザで `http://localhost:8080/step0_interface.html` にアクセス
3. 各エントリーに対して以下を記入:
   - **概念化レベル**: Lv.1（点）/ Lv.2（線）/ Lv.3（面）
   - **自信度**: 1（迷った）/ 2（やや迷った）/ 3（確信）
   - **エビデンス**: 判定根拠のフレーズ引用
   - **メモ**: 迷った理由など

#### キーボードショートカット

| キー | 操作 |
|------|------|
| `1`, `2`, `3` | レベル選択 |
| `←`, `→` | 前後のエントリーへ移動 |

### 3. 結果エクスポート

- 画面下部の「結果をエクスポート」ボタンをクリック
- `step0_judged_YYYY-MM-DD.json` がダウンロードされる
- **このファイルを Kizuki log フォルダに保存**

### 4. 分析

```bash
python step0_analyze_results.py
```

出力内容:

- レベル分布（Lv.1/2/3 の割合）
- 学生別分布
- 前半 vs 後半 の比較
- 迷ったケースの一覧
- AI実装への示唆
- CSV ファイル (`step0_analysis_result.csv`)

## ファイル一覧

| ファイル | 説明 |
|---------|------|
| `step0_extract_data.py` | データ抽出スクリプト |
| `step0_data.json` | 抽出された20件のエントリー |
| `step0_interface.html` | 判定用HTMLインターフェース |
| `step0_level_definitions.md` | 判定基準リファレンス |
| `step0_analyze_results.py` | 分析スクリプト |
| `step0_judged_*.json` | 判定結果（エクスポート後に生成） |
| `step0_analysis_result.csv` | 分析結果CSV（分析後に生成） |

## 判定基準の要約

| Level | 名称 | 判定ポイント |
|-------|------|-------------|
| Lv.1 | 事実記述（点） | 出来事の記録のみ。解釈なし |
| Lv.2 | 文脈理解（線） | 背景に気づく。仮説を立て始める |
| Lv.3 | 職能一般化（面） | 一般原則を抽出。他場面に適用可能 |

> 迷ったら低い方を選ぶ。迷ったケースが AI プロンプト設計の鍵。
